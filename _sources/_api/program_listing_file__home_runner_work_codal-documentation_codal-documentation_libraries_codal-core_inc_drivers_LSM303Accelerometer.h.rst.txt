
.. _program_listing_file__home_runner_work_codal-documentation_codal-documentation_libraries_codal-core_inc_drivers_LSM303Accelerometer.h:

Program Listing for File LSM303Accelerometer.h
==============================================

|exhale_lsh| :ref:`Return to documentation for file <file__home_runner_work_codal-documentation_codal-documentation_libraries_codal-core_inc_drivers_LSM303Accelerometer.h>` (``/home/runner/work/codal-documentation/codal-documentation/libraries/codal-core/inc/drivers/LSM303Accelerometer.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   /*
   The MIT License (MIT)
   
   Copyright (c) 2017 Lancaster University.
   
   Permission is hereby granted, free of charge, to any person obtaining a
   copy of this software and associated documentation files (the "Software"),
   to deal in the Software without restriction, including without limitation
   the rights to use, copy, modify, merge, publish, distribute, sublicense,
   and/or sell copies of the Software, and to permit persons to whom the
   Software is furnished to do so, subject to the following conditions:
   
   The above copyright notice and this permission notice shall be included in
   all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
   THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
   DEALINGS IN THE SOFTWARE.
   */
   
   #ifndef LSM303_A_H
   #define LSM303_A_H
   
   #include "CodalConfig.h"
   #include "CodalComponent.h"
   #include "CodalUtil.h"
   #include "CoordinateSystem.h"
   #include "Pin.h"
   #include "I2C.h"
   #include "Accelerometer.h"
   
   
   #define LSM303_A_DEFAULT_ADDR         0x32
   
   #define LSM303_STATUS_REG_AUX_A         0x07
   #define LSM303_OUT_TEMP_L_A             0x0C
   #define LSM303_OUT_TEMP_H_A             0x0D
   #define LSM303_INT_COUNTER_REG_A          0x0E
   #define LSM303_WHO_AM_I_A                 0x0F
   #define LSM303_TEMP_CFG_REG_A             0x1F
   #define LSM303_CTRL_REG1_A              0x20
   #define LSM303_CTRL_REG2_A              0x21
   #define LSM303_CTRL_REG3_A              0x22
   #define LSM303_CTRL_REG4_A              0x23
   #define LSM303_CTRL_REG5_A              0x24
   #define LSM303_CTRL_REG6_A              0x25
   #define LSM303_DATACAPTURE_A              0x26
   #define LSM303_STATUS_REG_A             0x27
   #define LSM303_OUT_X_L_A                  0x28
   #define LSM303_OUT_X_H_A                  0x29
   #define LSM303_OUT_Y_L_A                  0x2A
   #define LSM303_OUT_Y_H_A                  0x2B
   #define LSM303_OUT_Z_L_A                  0x2C
   #define LSM303_OUT_Z_H_A                  0x2D
   #define LSM303_FIFO_CTRL_REG_A          0x2E
   #define LSM303_FIFO_SRC_REG_A             0x2F
   #define LSM303_INT1_CFG_A                 0x30
   #define LSM303_INT1_SRC_A                 0x31
   #define LSM303_INT1_THS_A                 0x32
   #define LSM303_INT1_DURATION_A          0x33
   #define LSM303_INT2_CFG_A                 0x34
   #define LSM303_INT2_SRC_A                 0x35
   #define LSM303_INT2_THS_A                 0x36
   #define LSM303_INT2_DURATION_A          0x37
   #define LSM303_CLICK_CFG_A              0x38
   #define LSM303_CLICK_SRC_A              0x39
   #define LSM303_CLICK_THS_A              0x3A
   #define LSM303_TIME_LIMIT_A             0x3B
   #define LSM303_TIME_LATENCY_A             0x3C
   #define LSM303_TIME_WINDOW_A              0x3D
   #define LSM303_ACT_THS_A                  0x3E
   #define LSM303_ACT_DUR_A                  0x3F
   
   #define LSM303_A_WHOAMI_VAL           0x33
   #define LSM303_A_STATUS_DATA_READY    0x08
   
   #define LSM303_A_STATUS_ENABLED       0x0100
   #define LSM303_A_STATUS_SLEEPING      0x0200
   
   namespace codal
   {
     class LSM303Accelerometer : public Accelerometer
     {
       I2C&            i2c;                    // The I2C interface to use.
       Pin&            int1;                   // Data ready interrupt.
       uint16_t        address;                // I2C address of this accelerometer.
   
       public:
   
       LSM303Accelerometer(I2C& _i2c, Pin &_int1, CoordinateSpace &coordinateSpace, uint16_t address = LSM303_A_DEFAULT_ADDR, uint16_t id = DEVICE_ID_ACCELEROMETER);
   
       virtual int configure() override;
   
       virtual int requestUpdate() override;
   
       virtual void idleCallback() override;
   
       virtual int setSleep(bool doSleep) override;
       
   
       static int isDetected(I2C &i2c, uint16_t address = LSM303_A_DEFAULT_ADDR);
   
       ~LSM303Accelerometer();
     };
   }
   #endif
   
